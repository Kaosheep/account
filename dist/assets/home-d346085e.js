import{_ as W,a as Y,b as G,c as H,d as J,e as K,f as P,g as Q,h as X,i as Z}from"./tra-dcb6de31.js";import{r as D,a as I,c as ss,o as es,b as V,d,e as u,f as s,g as r,w as x,h as ts,t as g,F,i as S,n as os,j as p,v as b,k as B,l as M,p as ns,m as as,q as ls}from"./index-d1ddd117.js";import{_ as cs,a as y}from"./_plugin-vue_export-helper-487259a6.js";import{c as _s}from"./caculator-f7895347.js";const is="/accountbook/assets/mon-a79d5cd9.png",ds="/accountbook/assets/analytics-5f154e63.png";const f=k=>(ns("data-v-8d5526d4"),k=k(),as(),k),us={class:"top"},rs={class:"b today"},ps={class:"b"},ms={class:"board"},gs=f(()=>s("div",{class:"title"},[s("h2",null," 今日支出明細 ")],-1)),hs={class:"container"},vs={key:0},bs=["src"],ys=["onClick"],fs={class:"btn"},ks={class:"date"},Cs={class:"typeblock"},ws=["onClick"],Ds=["src"],xs={class:"subtype"},Fs=["onClick"],Ss={class:"money"},Bs={class:"cal"},$s={class:"bum"},js={class:"an"},Is=f(()=>s("img",{src:is,alt:""},null,-1)),Vs=f(()=>s("p",null,"收入總覽",-1)),Ms={class:"an"},Ns=f(()=>s("img",{src:ds,alt:""},null,-1)),Us=f(()=>s("p",null,"消費分析",-1)),As={__name:"home",setup(k){const $=e=>new URL(Object.assign({"../assets/image/icon/analytics.png":W,"../assets/image/icon/clo.png":Y,"../assets/image/icon/dal.png":G,"../assets/image/icon/edu.png":H,"../assets/image/icon/els.png":J,"../assets/image/icon/ent.png":K,"../assets/image/icon/foo.png":P,"../assets/image/icon/med.png":Q,"../assets/image/icon/mon.png":X,"../assets/image/icon/tra.png":Z})[`../assets/image/icon/${e}.png`],self.location).href,h=(e,n)=>{ls[e]({message:n})},l=D({full:{},year:{},month:{},date:{},day:{}}),N=()=>{let e=new Date;l.year=String(e.getFullYear()),l.month=String(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1),l.date=String(e.getDate()<10?"0"+e.getDate():e.getDate()),l.full=`${l.year}-${l.month}-${l.date}`,t.con_day=l.full;const n=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];l.day=n[new Date().getDay()]},_=D({obj:{},sum:{},t:{},maintype:[],subtype:[],type:[]}),C=()=>{const e="http://localhost/dashboard/public/php/fetchdata.php";y.post(e,{full:l.full}).then(n=>{const a=n.data;a.result["sum(con_sum)"]?_.sum=a.result["sum(con_sum)"]:_.sum=0,_.obj=a.data}).catch(n=>{console.log(n.message)})},U=()=>{const e="http://localhost/dashboard/public/php/fetchtype.php";y.get(e).then(n=>{const a=n.data;_.maintype=a.typs,_.subtype=a.styps}).catch(n=>{console.log(n.message)})},j=e=>{if(e==="foo")return"#B6B6CF";if(e==="clo")return"#F5DAC2";if(e==="dal")return"#B5CAA0";if(e==="edu")return"#7DB9DE";if(e==="els")return"#ccc";if(e==="med")return"#D9CD90";if(e==="tra")return"#F8C3CD";if(e==="ent")return"#FAD689";if(e==="mon")return"#F9BF45"},t=D({con_id:"",s_id:"",m_id:"",con_sum:"",con_day:"",sub_name:"",t:0}),i=I(!1),m=I(!1),v=()=>{m.value&&(m.value=!1),i.value=!i.value,t.con_id="",t.m_id="",t.s_id="",t.con_sum="",t.sub_name=""},A=(e,n,a,c,o,w)=>{i.value=!i.value,m.value=!m.value,t.con_id=e,t.m_id=a,t.s_id=c,t.con_day=n,t.con_sum=o,t.sub_name=w},E=e=>{t.m_id=e},z=(e,n,a)=>{t.s_id=e,t.sub_name=n,t.t=a},L=ss(()=>_.subtype.filter(e=>e.m_id==t.m_id)),O=e=>{t.con_sum=e},T=()=>{if(t.s_id=="")h("warning","未輸入類別");else if(t.con_sum=="")h("warning","未輸入金額");else{let e=1;const n="http://localhost/dashboard/public/php/insert.php";y.post(n,{mod:e,con_day:t.con_day,m_id:t.m_id,con_sum:t.con_sum,s_id:t.s_id}).then(a=>{let c=a.data;h("success",c),v(),C()}).catch(a=>{console.log(a.message)})}},q=()=>{if(t.con_sum=="")h("warning","未輸入金額");else{let e=2;const n="http://localhost/dashboard/public/php/insert.php";y.post(n,{mod:e,con_day:t.con_day,m_id:t.m_id,con_sum:t.con_sum,s_id:t.s_id,con_id:t.con_id}).then(a=>{let c=a.data;h("success",c),v(),C()}).catch(a=>{console.log(a.message)})}},R=()=>{let e=3;const n="http://localhost/dashboard/public/php/insert.php";y.post(n,{mod:e,con_day:t.con_day,m_id:t.m_id,con_sum:t.con_sum,s_id:t.s_id,con_id:t.con_id}).then(a=>{let c=a.data;h("success",c),v(),C()}).catch(a=>{console.log(a.message)})};return es(()=>{N(),C(),U()}),(e,n)=>{const a=V("font-awesome-icon"),c=V("router-link");return d(),u("main",null,[s("div",us,[s("div",rs,[r(c,{to:"/daydetail"},{default:x(()=>[r(a,{icon:["far","calendar-days"]}),s("p",null,g(l.full),1)]),_:1})]),s("div",ps,[s("p",null,[ts("今日支出 "),s("b",null,g(_.sum),1)])])]),s("div",ms,[gs,s("div",hs,[_.obj?(d(!0),u(F,{key:1},S(_.obj,o=>(d(),u("div",{class:"row",key:o.con_id,style:M({backgroundColor:j(o.m_id)})},[s("span",null,[s("img",{src:$(o.m_id),alt:""},null,8,bs),s("span",null,g(o.m_name),1)]),s("span",null,g(o.sub_name),1),s("span",null,g(o.con_sum)+" 元",1),s("span",{onClick:w=>A(o.con_id,o.con_day,o.m_id,o.s_id,o.con_sum,o.sub_name)},[r(a,{icon:["fas","pen"]})],8,ys)],4))),128)):(d(),u("div",vs,"今日尚未紀錄"))]),s("div",{class:os(["add",{slide:i.value}])},[s("div",fs,[s("button",null,[s("span",{onClick:v},[r(a,{icon:["fas","plus"],id:"plus"})]),p(s("span",{onClick:v},"新增明細",512),[[b,!i.value]]),p(s("span",ks,[p(s("input",{type:"date","onUpdate:modelValue":n[0]||(n[0]=o=>t.con_day=o)},null,512),[[B,t.con_day]])],512),[[b,i.value]]),p(s("span",{onClick:R,class:"can"},[r(a,{icon:["far","trash-can"]})],512),[[b,m.value]]),s("span",{onClick:v,class:"back"})])]),s("div",Cs,[(d(!0),u(F,null,S(_.maintype,o=>(d(),u("div",{class:"type",key:o.m_id,onClick:w=>E(o.m_id)},[s("div",{style:M({backgroundColor:j(o.m_id)})},[s("img",{src:$(o.m_id),alt:""},null,8,Ds),s("span",null,g(o.m_name),1)],4)],8,ws))),128))]),s("div",xs,[(d(!0),u(F,null,S(L.value,o=>(d(),u("div",{class:"st",key:o.s_id,onClick:w=>z(o.s_id,o.sub_name,o.t)},[s("p",null,g(o.sub_name),1)],8,Fs))),128))]),s("div",Ss,[p(s("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=o=>t.sub_name=o),readonly:""},null,512),[[B,t.sub_name]]),p(s("input",{type:"text","onUpdate:modelValue":n[2]||(n[2]=o=>t.con_sum=o)},null,512),[[B,t.con_sum]]),p(s("button",{onClick:T},"儲存",512),[[b,!m.value]]),p(s("button",{onClick:q},"修改",512),[[b,m.value]])]),s("div",Bs,[r(_s,{onCal:O})])],2)]),s("div",$s,[s("div",js,[r(c,{to:"/bank"},{default:x(()=>[Is,Vs]),_:1})]),s("div",Ms,[r(c,{to:"/analysis"},{default:x(()=>[Ns,Us]),_:1})])])])}}},Ts=cs(As,[["__scopeId","data-v-8d5526d4"]]);export{Ts as default};
